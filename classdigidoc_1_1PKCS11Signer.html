<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdigidocpp: digidoc::PKCS11Signer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="Doxyfile.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="ID.ico"/></td>
  <td id="projectalign">
   <div id="projectname">libdigidocpp<span id="projectnumber">&#160;4.4.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classdigidoc_1_1PKCS11Signer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classdigidoc_1_1PKCS11Signer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">digidoc::PKCS11Signer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements <code><a class="el" href="classdigidoc_1_1Signer.html" title="Signer interface. Provides interface for signing documents.">Signer</a></code> interface for ID-Cards, which support PKCS#11 protocol.  
 <a href="classdigidoc_1_1PKCS11Signer.html#details">More...</a></p>

<p><code>#include &lt;PKCS11Signer.h&gt;</code></p>

<p>Inherits <a class="el" href="classdigidoc_1_1Signer.html">digidoc::Signer</a>.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a135e22209cf3874e9398be704c56eba8" id="r_a135e22209cf3874e9398be704c56eba8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a135e22209cf3874e9398be704c56eba8">PKCS11Signer</a> (const std::string &amp;driver=&quot;&quot;)</td></tr>
<tr class="separator:a135e22209cf3874e9398be704c56eba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2fc7aac3a01a637da0b9e6f4198dec" id="r_a2f2fc7aac3a01a637da0b9e6f4198dec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a2f2fc7aac3a01a637da0b9e6f4198dec">~PKCS11Signer</a> () override</td></tr>
<tr class="separator:a2f2fc7aac3a01a637da0b9e6f4198dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ecbf0e36594d5f8a073080a7f1ab3ca" id="r_a6ecbf0e36594d5f8a073080a7f1ab3ca"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a6ecbf0e36594d5f8a073080a7f1ab3ca">cert</a> () const override</td></tr>
<tr class="memdesc:a6ecbf0e36594d5f8a073080a7f1ab3ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reimplemented parent class method <code><a class="el" href="classdigidoc_1_1Signer.html#a7eb1b63bddc7376f25c8e50c053c7eb1">digidoc::Signer::cert</a></code>  <br /></td></tr>
<tr class="separator:a6ecbf0e36594d5f8a073080a7f1ab3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67763564693fd121fd475c644685642a" id="r_a67763564693fd121fd475c644685642a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a67763564693fd121fd475c644685642a">method</a> () const override</td></tr>
<tr class="separator:a67763564693fd121fd475c644685642a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc1bf7b043313a947072b8af7cba5891" id="r_afc1bf7b043313a947072b8af7cba5891"><td class="memItemLeft" align="right" valign="top">std::vector&lt; unsigned char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#afc1bf7b043313a947072b8af7cba5891">sign</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1PKCS11Signer.html#a67763564693fd121fd475c644685642a">method</a>, const std::vector&lt; unsigned char &gt; &amp;digest) const override</td></tr>
<tr class="memdesc:afc1bf7b043313a947072b8af7cba5891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reimplemented parent class method <code><a class="el" href="classdigidoc_1_1Signer.html#a76c3e0f0510c696f8de8abb70359ce43">digidoc::Signer::sign</a></code>  <br /></td></tr>
<tr class="separator:afc1bf7b043313a947072b8af7cba5891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab51b4c5707f29989c85b9fb883336e82" id="r_ab51b4c5707f29989c85b9fb883336e82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#ab51b4c5707f29989c85b9fb883336e82">setPin</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1PKCS11Signer.html#a99d922f4fd3def7c3c385a46f406a279">pin</a>)</td></tr>
<tr class="separator:ab51b4c5707f29989c85b9fb883336e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classdigidoc_1_1Signer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classdigidoc_1_1Signer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classdigidoc_1_1Signer.html">digidoc::Signer</a></td></tr>
<tr class="memitem:a41490533b37bc54ee53c6f90e7c96712 inherit pub_methods_classdigidoc_1_1Signer" id="r_a41490533b37bc54ee53c6f90e7c96712"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a41490533b37bc54ee53c6f90e7c96712">~Signer</a> ()</td></tr>
<tr class="separator:a41490533b37bc54ee53c6f90e7c96712 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3b7a4ec3db2b586916ee63a33b624a inherit pub_methods_classdigidoc_1_1Signer" id="r_a5c3b7a4ec3db2b586916ee63a33b624a"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a5c3b7a4ec3db2b586916ee63a33b624a">profile</a> () const</td></tr>
<tr class="separator:a5c3b7a4ec3db2b586916ee63a33b624a inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a034fa26505e3b01bf44604083931599d inherit pub_methods_classdigidoc_1_1Signer" id="r_a034fa26505e3b01bf44604083931599d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a034fa26505e3b01bf44604083931599d">userAgent</a> () const</td></tr>
<tr class="separator:a034fa26505e3b01bf44604083931599d inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f4f21e7800cba9d94fa5652dff8d42 inherit pub_methods_classdigidoc_1_1Signer" id="r_a93f4f21e7800cba9d94fa5652dff8d42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a93f4f21e7800cba9d94fa5652dff8d42">usingENProfile</a> () const</td></tr>
<tr class="separator:a93f4f21e7800cba9d94fa5652dff8d42 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aadd394c830c7d1d007886eeb1e6c6a26 inherit pub_methods_classdigidoc_1_1Signer" id="r_aadd394c830c7d1d007886eeb1e6c6a26"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#aadd394c830c7d1d007886eeb1e6c6a26">city</a> () const</td></tr>
<tr class="separator:aadd394c830c7d1d007886eeb1e6c6a26 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaae5230f4453e7cb3f50b3c0b69c408d inherit pub_methods_classdigidoc_1_1Signer" id="r_aaae5230f4453e7cb3f50b3c0b69c408d"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#aaae5230f4453e7cb3f50b3c0b69c408d">streetAddress</a> () const</td></tr>
<tr class="separator:aaae5230f4453e7cb3f50b3c0b69c408d inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4bf4477570a92305aa876ffce914b3b inherit pub_methods_classdigidoc_1_1Signer" id="r_af4bf4477570a92305aa876ffce914b3b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#af4bf4477570a92305aa876ffce914b3b">stateOrProvince</a> () const</td></tr>
<tr class="separator:af4bf4477570a92305aa876ffce914b3b inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a416bed411b532862dec816830c96e7b8 inherit pub_methods_classdigidoc_1_1Signer" id="r_a416bed411b532862dec816830c96e7b8"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a416bed411b532862dec816830c96e7b8">postalCode</a> () const</td></tr>
<tr class="separator:a416bed411b532862dec816830c96e7b8 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74285b177fb4a8b4296c3e3ee003490c inherit pub_methods_classdigidoc_1_1Signer" id="r_a74285b177fb4a8b4296c3e3ee003490c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a74285b177fb4a8b4296c3e3ee003490c">countryName</a> () const</td></tr>
<tr class="separator:a74285b177fb4a8b4296c3e3ee003490c inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53bf835b8b0b104d2f324e124f61814c inherit pub_methods_classdigidoc_1_1Signer" id="r_a53bf835b8b0b104d2f324e124f61814c"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a53bf835b8b0b104d2f324e124f61814c">signerRoles</a> () const</td></tr>
<tr class="separator:a53bf835b8b0b104d2f324e124f61814c inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a062d17798a9b1ebbbd524f9b0527061c inherit pub_methods_classdigidoc_1_1Signer" id="r_a062d17798a9b1ebbbd524f9b0527061c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a062d17798a9b1ebbbd524f9b0527061c">setMethod</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#aae6c966060bf8855d855f3a4784f7c2e">method</a>)</td></tr>
<tr class="separator:a062d17798a9b1ebbbd524f9b0527061c inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb96096d6b5ea03dbc5026a7aabc41c4 inherit pub_methods_classdigidoc_1_1Signer" id="r_acb96096d6b5ea03dbc5026a7aabc41c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#acb96096d6b5ea03dbc5026a7aabc41c4">setProfile</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a5c3b7a4ec3db2b586916ee63a33b624a">profile</a>)</td></tr>
<tr class="separator:acb96096d6b5ea03dbc5026a7aabc41c4 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67fd2d257f19c516537bb48b93a4a380 inherit pub_methods_classdigidoc_1_1Signer" id="r_a67fd2d257f19c516537bb48b93a4a380"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a67fd2d257f19c516537bb48b93a4a380">setUserAgent</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a034fa26505e3b01bf44604083931599d">userAgent</a>)</td></tr>
<tr class="separator:a67fd2d257f19c516537bb48b93a4a380 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89c257ecbd64fdfd58de75fdaec99234 inherit pub_methods_classdigidoc_1_1Signer" id="r_a89c257ecbd64fdfd58de75fdaec99234"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a89c257ecbd64fdfd58de75fdaec99234">setENProfile</a> (bool enable)</td></tr>
<tr class="separator:a89c257ecbd64fdfd58de75fdaec99234 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a811829fbc4a70a487301e194c1a09f76 inherit pub_methods_classdigidoc_1_1Signer" id="r_a811829fbc4a70a487301e194c1a09f76"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a811829fbc4a70a487301e194c1a09f76">setSignatureProductionPlace</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#aadd394c830c7d1d007886eeb1e6c6a26">city</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#af4bf4477570a92305aa876ffce914b3b">stateOrProvince</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a416bed411b532862dec816830c96e7b8">postalCode</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a74285b177fb4a8b4296c3e3ee003490c">countryName</a>)</td></tr>
<tr class="separator:a811829fbc4a70a487301e194c1a09f76 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a191b4533763c268acfed17d656ba790a inherit pub_methods_classdigidoc_1_1Signer" id="r_a191b4533763c268acfed17d656ba790a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a191b4533763c268acfed17d656ba790a">setSignatureProductionPlaceV2</a> (const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#aadd394c830c7d1d007886eeb1e6c6a26">city</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#aaae5230f4453e7cb3f50b3c0b69c408d">streetAddress</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#af4bf4477570a92305aa876ffce914b3b">stateOrProvince</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a416bed411b532862dec816830c96e7b8">postalCode</a>, const std::string &amp;<a class="el" href="classdigidoc_1_1Signer.html#a74285b177fb4a8b4296c3e3ee003490c">countryName</a>)</td></tr>
<tr class="separator:a191b4533763c268acfed17d656ba790a inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c34490317e1eafd25661acb22b0d981 inherit pub_methods_classdigidoc_1_1Signer" id="r_a9c34490317e1eafd25661acb22b0d981"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a9c34490317e1eafd25661acb22b0d981">setSignerRoles</a> (const std::vector&lt; std::string &gt; &amp;<a class="el" href="classdigidoc_1_1Signer.html#a53bf835b8b0b104d2f324e124f61814c">signerRoles</a>)</td></tr>
<tr class="separator:a9c34490317e1eafd25661acb22b0d981 inherit pub_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a99d922f4fd3def7c3c385a46f406a279" id="r_a99d922f4fd3def7c3c385a46f406a279"><td class="memItemLeft" align="right" valign="top">virtual std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a99d922f4fd3def7c3c385a46f406a279">pin</a> (const <a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> &amp;certificate) const</td></tr>
<tr class="separator:a99d922f4fd3def7c3c385a46f406a279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1481fcce312f45751b4c8a2253c52201" id="r_a1481fcce312f45751b4c8a2253c52201"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a1481fcce312f45751b4c8a2253c52201">selectSigningCertificate</a> (const std::vector&lt; <a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> &gt; &amp;certificates) const</td></tr>
<tr class="separator:a1481fcce312f45751b4c8a2253c52201"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pro_methods_classdigidoc_1_1Signer"><td colspan="2" onclick="javascript:toggleInherit('pro_methods_classdigidoc_1_1Signer')"><img src="closed.png" alt="-"/>&#160;Protected Member Functions inherited from <a class="el" href="classdigidoc_1_1Signer.html">digidoc::Signer</a></td></tr>
<tr class="memitem:a7f8267b0af0ce05e01e2b21e8f3d974a inherit pro_methods_classdigidoc_1_1Signer" id="r_a7f8267b0af0ce05e01e2b21e8f3d974a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdigidoc_1_1Signer.html#a7f8267b0af0ce05e01e2b21e8f3d974a">Signer</a> ()</td></tr>
<tr class="separator:a7f8267b0af0ce05e01e2b21e8f3d974a inherit pro_methods_classdigidoc_1_1Signer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements <code><a class="el" href="classdigidoc_1_1Signer.html" title="Signer interface. Provides interface for signing documents.">Signer</a></code> interface for ID-Cards, which support PKCS#11 protocol. </p>
<p>Abstract method <code>selectSigningCertificate</code> is called if the signer needs to choose the correct signing certificate. It is called also if there is only one certificate found on ID-Card. Parameter <code>certificates</code> provides list of all certificates found in the ID-Card.</p>
<p>Abstract method <code>pin</code> is called if the selected certificate needs PIN to log in.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classdigidoc_1_1PKCS11Signer.html#a1481fcce312f45751b4c8a2253c52201">selectSigningCertificate</a> </dd>
<dd>
<a class="el" href="classdigidoc_1_1PKCS11Signer.html#a99d922f4fd3def7c3c385a46f406a279">pin</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a135e22209cf3874e9398be704c56eba8" name="a135e22209cf3874e9398be704c56eba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a135e22209cf3874e9398be704c56eba8">&#9670;&#160;</a></span>PKCS11Signer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PKCS11Signer::PKCS11Signer </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>driver</em> = <code>&quot;&quot;</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads PKCS#11 driver.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">driver</td><td>full path to the PKCS#11 driver (e.g. /usr/lib/opensc-pkcs11.so) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a></td><td>exception is thrown if the provided PKCS#11 driver loading failed. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="classdigidoc_1_1Conf.html#a67297f85dafaa99edaffe700378a342f">digidoc::Conf::instance()</a>, and <a class="el" href="classdigidoc_1_1Conf.html#aeaf4e0e2c0dc1230929836be48955d4b">digidoc::Conf::PKCS11Driver()</a>.</p>

</div>
</div>
<a id="a2f2fc7aac3a01a637da0b9e6f4198dec" name="a2f2fc7aac3a01a637da0b9e6f4198dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f2fc7aac3a01a637da0b9e6f4198dec">&#9670;&#160;</a></span>~PKCS11Signer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">PKCS11Signer::~PKCS11Signer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Unload PKCS#11 module and releases acquired memory. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6ecbf0e36594d5f8a073080a7f1ab3ca" name="a6ecbf0e36594d5f8a073080a7f1ab3ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ecbf0e36594d5f8a073080a7f1ab3ca">&#9670;&#160;</a></span>cert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> PKCS11Signer::cert </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented parent class method <code><a class="el" href="classdigidoc_1_1Signer.html#a7eb1b63bddc7376f25c8e50c053c7eb1">digidoc::Signer::cert</a></code> </p>
<p>Finds all slots connected with the computer, if the slots have tokens, lists all certificates found in token. If there is more that 1 certificate lets the user application select (by calling the <code>selectSignCertificate</code> callback function) the certificate used for signing.</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a></td><td>throws exception if failed to select the signing certificate. For example no cards found or card has no certificate. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdigidoc_1_1Signer.html#a7eb1b63bddc7376f25c8e50c053c7eb1">digidoc::Signer</a>.</p>

<p class="reference">References <a class="el" href="classdigidoc_1_1X509Cert.html#a7e36034647c55cffbf31100e706e7be7">digidoc::X509Cert::isCA()</a>, <a class="el" href="classdigidoc_1_1X509Cert.html#ae735eeb4ec92243579eec708224518b6">digidoc::X509Cert::isValid()</a>, <a class="el" href="classdigidoc_1_1X509Cert.html#adfdb312098c7691ad166a392dadf9d46">digidoc::X509Cert::keyUsage()</a>, <a class="el" href="classdigidoc_1_1X509Cert.html#ae043d5889073a6ccd4168e0a5329257ba8b2e9e23b97b2da8fc0e7c345ae949e6">digidoc::X509Cert::NonRepudiation</a>, and <a class="el" href="classdigidoc_1_1PKCS11Signer.html#a1481fcce312f45751b4c8a2253c52201">selectSigningCertificate()</a>.</p>

</div>
</div>
<a id="a67763564693fd121fd475c644685642a" name="a67763564693fd121fd475c644685642a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67763564693fd121fd475c644685642a">&#9670;&#160;</a></span>method()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string PKCS11Signer::method </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Gets signature method </p>

<p>Reimplemented from <a class="el" href="classdigidoc_1_1Signer.html#aae6c966060bf8855d855f3a4784f7c2e">digidoc::Signer</a>.</p>

<p class="reference">References <a class="el" href="classdigidoc_1_1Signer.html#aae6c966060bf8855d855f3a4784f7c2e">digidoc::Signer::method()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classdigidoc_1_1PKCS11Signer.html#afc1bf7b043313a947072b8af7cba5891">sign()</a>.</p>

</div>
</div>
<a id="a99d922f4fd3def7c3c385a46f406a279" name="a99d922f4fd3def7c3c385a46f406a279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d922f4fd3def7c3c385a46f406a279">&#9670;&#160;</a></span>pin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">string PKCS11Signer::pin </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> &amp;&#160;</td>
          <td class="paramname"><em>certificate</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Abstract method that returns PIN code for the selected signing certificate. If PIN code is not needed this method is never called. To cancel the login this method should throw an exception.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">certificate</td><td>certificate that is used for signing and needs a PIN for login. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the PIN code to login. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a></td><td>should throw an exception if the login operation should be canceled. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="classdigidoc_1_1PKCS11Signer.html#ab51b4c5707f29989c85b9fb883336e82">setPin()</a>, and <a class="el" href="classdigidoc_1_1PKCS11Signer.html#afc1bf7b043313a947072b8af7cba5891">sign()</a>.</p>

</div>
</div>
<a id="a1481fcce312f45751b4c8a2253c52201" name="a1481fcce312f45751b4c8a2253c52201"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1481fcce312f45751b4c8a2253c52201">&#9670;&#160;</a></span>selectSigningCertificate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> PKCS11Signer::selectSigningCertificate </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="classdigidoc_1_1X509Cert.html">X509Cert</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>certificates</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Abstract method for selecting the correct signing certificate. If none of the certificates suit for signing, this method should throw an <a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a>. This method is always called, when there is at least 1 certificate available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">certificates</td><td>available certificates to choose from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the certificate used for signing. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a></td><td>should throw an exception if no suitable certificate is in the list or the operation should be cancelled. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">Referenced by <a class="el" href="classdigidoc_1_1PKCS11Signer.html#a6ecbf0e36594d5f8a073080a7f1ab3ca">cert()</a>.</p>

</div>
</div>
<a id="ab51b4c5707f29989c85b9fb883336e82" name="ab51b4c5707f29989c85b9fb883336e82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab51b4c5707f29989c85b9fb883336e82">&#9670;&#160;</a></span>setPin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PKCS11Signer::setPin </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If sub class does not want reimplement <code>pin</code> method then it is possible set default pin</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="classdigidoc_1_1PKCS11Signer.html#a99d922f4fd3def7c3c385a46f406a279">pin()</a>.</p>

</div>
</div>
<a id="afc1bf7b043313a947072b8af7cba5891" name="afc1bf7b043313a947072b8af7cba5891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc1bf7b043313a947072b8af7cba5891">&#9670;&#160;</a></span>sign()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">vector&lt; unsigned char &gt; PKCS11Signer::sign </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; unsigned char &gt; &amp;&#160;</td>
          <td class="paramname"><em>digest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented parent class method <code><a class="el" href="classdigidoc_1_1Signer.html#a76c3e0f0510c696f8de8abb70359ce43">digidoc::Signer::sign</a></code> </p>
<p>Signs the digest provided using the selected certificate. If the certificate needs PIN, the PIN is acquired by calling the callback function <code>pin</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">method</td><td>digest method to be used </td></tr>
    <tr><td class="paramname">digest</td><td>digest to sign </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>signature signed result </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classdigidoc_1_1Exception.html" title="Base exception class of the digidoc implementation.">Exception</a></td><td>throws exception if the signing operation failed. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="classdigidoc_1_1Signer.html#a76c3e0f0510c696f8de8abb70359ce43">digidoc::Signer</a>.</p>

<p class="reference">References <a class="el" href="classdigidoc_1_1PKCS11Signer.html#a67763564693fd121fd475c644685642a">method()</a>, <a class="el" href="classdigidoc_1_1PKCS11Signer.html#a99d922f4fd3def7c3c385a46f406a279">pin()</a>, <a class="el" href="classdigidoc_1_1Exception.html#a7a400013d0a2fb36b1978bc427d0b754a92cd1057fb81ecc685e4501e7dc111a2">digidoc::Exception::PINCanceled</a>, <a class="el" href="classdigidoc_1_1Exception.html#a7a400013d0a2fb36b1978bc427d0b754a9902ee19ff2c58439acca31c793bcb2b">digidoc::Exception::PINFailed</a>, <a class="el" href="classdigidoc_1_1Exception.html#a7a400013d0a2fb36b1978bc427d0b754a453ad7eef181fe2673fbb8272c58d7e8">digidoc::Exception::PINIncorrect</a>, <a class="el" href="classdigidoc_1_1Exception.html#a7a400013d0a2fb36b1978bc427d0b754a9f001d60c651a8e441c64e620ab55a19">digidoc::Exception::PINLocked</a>, and <a class="el" href="classdigidoc_1_1Exception.html#a4d4ff85ccb274ead0eee6074c7e7a6f1">digidoc::Exception::setCode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><b>PKCS11Signer.h</b></li>
<li><b>PKCS11Signer.cpp</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedigidoc.html">digidoc</a></li><li class="navelem"><a class="el" href="classdigidoc_1_1PKCS11Signer.html">PKCS11Signer</a></li>
    <li class="footer">Generated on Fri Feb 27 2026 08:03:16 for libdigidocpp by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
